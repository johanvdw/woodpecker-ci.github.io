"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([[8788],{49613:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>m});var n=r(59496);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(r),m=o,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return r?n.createElement(f,i(i({ref:t},l),{},{components:r})):n.createElement(f,i({ref:t},l))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var p=2;p<a;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},39372:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>b,contentTitle:()=>m,default:()=>v,frontMatter:()=>d,metadata:()=>f,toc:()=>y});var n=r(49613),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&l(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&l(e,r,t[r]);return e};const d={},m="Cron",f={unversionedId:"usage/cron",id:"version-1.0/usage/cron",title:"Cron",description:"To configure cron jobs you need at least push access to the repository.",source:"@site/versioned_docs/version-1.0/20-usage/45-cron.md",sourceDirName:"20-usage",slug:"/usage/cron",permalink:"/docs/usage/cron",draft:!1,editUrl:"https://github.com/woodpecker-ci/woodpecker/edit/master/docs/versioned_docs/version-1.0/20-usage/45-cron.md",tags:[],version:"1.0",sidebarPosition:45,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Registries",permalink:"/docs/usage/registries"},next:{title:"Environment variables",permalink:"/docs/usage/environment"}},b={},y=[{value:"Add a new cron job",id:"add-a-new-cron-job",level:2}],g={toc:y};function v(e){var t,o=e,{components:l}=o,d=((e,t)=>{var r={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(o,["components"]);return(0,n.kt)("wrapper",(t=u(u({},g),d),a(t,i({components:l,mdxType:"MDXLayout"}))),(0,n.kt)("h1",u({},{id:"cron"}),"Cron"),(0,n.kt)("p",null,"To configure cron jobs you need at least push access to the repository."),(0,n.kt)("h2",u({},{id:"add-a-new-cron-job"}),"Add a new cron job"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"To create a new cron job adjust your pipeline config(s) and add the event filter to all steps you would like to run by the cron job:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",u({parentName:"pre"},{className:"language-diff"}),' steps:\n   sync_locales:\n     image: weblate_sync\n     settings:\n       url: example.com\n       token:\n         from_secret: weblate_token\n+    when:\n+      event: cron\n+      cron: "name of the cron job" # if you only want to execute this step by a specific cron job\n'))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create a new cron job in the repository settings:"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"cron settings",src:r(23078).Z,width:"1057",height:"567"})),(0,n.kt)("p",{parentName:"li"},"The supported schedule syntax can be found at ",(0,n.kt)("a",u({parentName:"p"},{href:"https://pkg.go.dev/github.com/robfig/cron?utm_source=godoc#hdr-CRON_Expression_Format"}),"https://pkg.go.dev/github.com/robfig/cron?utm_source=godoc#hdr-CRON_Expression_Format"),". If you need general understanding of the cron syntax ",(0,n.kt)("a",u({parentName:"p"},{href:"https://crontab.guru/"}),"https://crontab.guru/")," is a good place to start and experiment."),(0,n.kt)("p",{parentName:"li"},"Examples: ",(0,n.kt)("inlineCode",{parentName:"p"},"@every 5m"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"@daily"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"0 30 * * * *")," ..."),(0,n.kt)("admonition",u({parentName:"li"},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Woodpeckers cron syntax starts with seconds instead of minutes as used by most linux cron schedulers."),(0,n.kt)("p",{parentName:"admonition"},'Example: "At minute 30 every hour" would be ',(0,n.kt)("inlineCode",{parentName:"p"},"0 30 * * * *")," instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"30 * * * *"))))))}v.isMDXComponent=!0},23078:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/cron-settings-ad2d191ee07c3f4c10fd98a81ad5fe76.png"}}]);